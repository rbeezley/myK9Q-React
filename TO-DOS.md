# Outstanding Tasks


## Setup Automated Test Execution - 2025-11-20 09:28

- **Add pre-commit hook and CI/CD pipeline for tests** - Implement automated test execution at multiple stages of development workflow. **Problem:** Currently tests only run when manually executing `npm test`, which can lead to untested code being committed or deployed. Need automated safety checks. **Files:** `package.json` (add Husky configuration), `.github/workflows/` (new CI/CD workflow file), potential `.husky/` directory for hooks. **Solution:** Three-tier approach: (1) Pre-commit hook using Husky to run tests before each commit and block if tests fail, (2) CI/CD pipeline (GitHub Actions) to run tests on every push, (3) Pre-deploy check ensuring tests pass before production deployment. Example Husky config provided in discussion.

## Test Pull-to-Refresh Mobile UX - 2025-11-20 20:02

- **Verify PTR improvements on production mobile** - Test pull-to-refresh activation threshold and scrolling behavior on app.myk9q.com after deployment. **Problem:** Pull-to-refresh was interfering with scrolling through long dog lists on mobile home page. Changes deployed (20px activation threshold, increased trigger distance) need real-world mobile testing to confirm they solve the issue. **Files:** `src/components/ui/PullToRefresh.tsx:85-101` (activation threshold logic), `src/pages/Home/Home.tsx:367-372` (PTR configuration). **Solution:** Test on actual mobile device: (1) Verify normal scrolling works smoothly without triggering PTR, (2) Verify intentional pull-down from top triggers refresh after deliberate gesture, (3) If still problematic, consider increasing activation threshold to 30-40px or adding user setting to disable PTR.

## Fix Manual Entry Reordering - 2025-11-20 20:08

- **Fix drag-and-drop entry reordering showing "not allowed" cursor** - Restore manual entry reordering functionality that currently shows a circle with cross icon (not allowed) when dragging entry cards. **Problem:** Users cannot manually reorder entries - drag handles appear when in drag mode (`isDragMode` is true), but dragging shows "not allowed" cursor instead of allowing reorder. The drag handles (GripVertical icon) are rendered at line 56-60 in SortableEntryCard, but the drag functionality is not working. DndContext and SortableContext are set up in EntryList.tsx around line 977-980, but something is preventing the drag interaction from working properly. **Files:** `src/pages/EntryList/SortableEntryCard.tsx:39-60` (useSortable hook and drag handle setup), `src/pages/EntryList/EntryList.tsx:112,217-222,979-984` (drag mode state and DndContext setup). **Solution:** Check: (1) DndContext sensors configuration - may be missing or incorrectly configured for pointer/mouse input, (2) CSS cursor styles that might be overriding the draggable cursor, (3) Event handlers that might be preventing drag start (e.g., onClick on parent elements), (4) Verify {...attributes} and {...listeners} are properly spread on the drag handle element. Common fix: Add PointerSensor and configure activationConstraint to require minimum drag distance.

## Integrate Landing and Login Page Backgrounds - 2025-11-20 20:31

- **Apply landing page background to login page with smooth transition** - Copy landing page's teal gradient, grid pattern, and animated diagonal element to login page, then add transition animation between pages. **Problem:** Landing page has compelling visual design (subtle teal gradient background, grid pattern overlay, slow-moving dark angled area in bottom right corner) that creates strong first impression, but login page uses different styling which breaks visual continuity. Users want these pages to feel integrated as part of the same onboarding experience. **Files:** `src/pages/Landing/Landing.css:68-101` (hero-diagonal animation and hero-grid pattern), `src/pages/Login/Login.css:29-51` (login-background styling), `src/pages/Landing/Landing.tsx:11,15` (navigation to login), App.tsx or router config (page transition handling). **Solution:** (1) Copy hero-grid and hero-diagonal styles from Landing.css to Login.css, adapting class names to fit login page structure, (2) Use same color variables (--color-energy, --color-steel, --color-void) on login page, (3) Add page transition using React Router transitions (framer-motion) or CSS view transitions API for smooth crossfade/slide when navigating from landing to login, (4) Ensure diagonal animation continues seamlessly between pages for cohesive feel.

## Implement AKC Rules Assistant Feature - 2025-11-20

- **Build AI-powered natural language rule lookup for judges** - Add a slide-out Rules Assistant panel (accessible from hamburger menu) that enables judges and exhibitors to search the AKC Scent Work rulebook using natural language queries like "what is the area size for exterior advanced?". **Features:** AI-powered semantic search when online (via Claude Haiku + Supabase Edge Function), keyword search fallback when offline (IndexedDB), sub-second response times, filter by level/element, rule citations with measurements. **Implementation:** See comprehensive plan in `docs/akc-rules-assistant-implementation-plan.md` for complete architecture, database schema, Edge Function code, frontend components, 7-phase timeline (4 weeks), cost analysis (~$2/year), testing strategy, and deployment checklist. **Cost:** Extremely cost-effective at ~$0.00014 per query using Claude Haiku. **Tech Stack:** Supabase (PostgreSQL + Edge Functions), IndexedDB for offline, React slide-out panel matching Inbox UX pattern.

## Constrain Scoresheet Page Width on Desktop - 2025-11-21

- **Apply desktop width constraint to scoresheet page for consistency** - Consider constraining the scoresheet page width on desktop screens (similar to settings page) to improve readability and visual hierarchy. **Problem:** Settings page uses max-width constraint so form labels and inputs are closer together, improving readability on large screens. Scoresheet page may benefit from similar treatment to prevent content from stretching too wide on desktop displays, making it easier to scan scores and timer information. **Files:** Likely `src/pages/Scoresheet/Scoresheet.tsx` or `src/pages/Scoresheet/Scoresheet.css` (scoresheet layout and styling). Reference implementation in Settings page for comparison. **Solution:** Evaluate whether scoresheet content would benefit from width constraint (consider: timer visibility, score button layout, hide finder sections, run notes). If beneficial, apply similar max-width container pattern used in Settings page. Test on various desktop screen sizes to ensure improved UX without compromising functionality.

## Fix Trial Date Timezone Issue on Scoresheet - 2025-11-21 10:05

- **Fix trial date displaying one day earlier than actual date** - Trial date on scoresheet page shows 9/15/2023 when it should be 9/16/2023, likely caused by timezone conversion issue. **Problem:** Trial date is displaying incorrectly (one day earlier), suspected to be a timezone issue where date is being converted from UTC or another timezone without proper handling, causing date to shift backward by one day. This affects the scoresheet display and could confuse judges/exhibitors about which trial day they're viewing. **Files:** `src/pages/Scoresheet/Scoresheet.tsx` (date display logic), potentially `src/stores/classStore.ts` or trial data fetching code (date parsing/storage), database schema (how trial dates are stored - with or without timezone). **Solution:** Check: (1) How trial dates are stored in database (timestamp with timezone vs date-only field), (2) How dates are parsed when fetched from API (ensure timezone-aware parsing or use date-only format), (3) Date display formatting (use date-only methods like `toLocaleDateString()` or format as YYYY-MM-DD without time component), (4) Consider storing trial dates as date-only strings (YYYY-MM-DD) rather than timestamps to avoid timezone issues entirely.
