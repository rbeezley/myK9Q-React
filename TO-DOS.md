# Outstanding Tasks


## Setup Automated Test Execution - 2025-11-20 09:28

- **Add pre-commit hook and CI/CD pipeline for tests** - Implement automated test execution at multiple stages of development workflow. **Problem:** Currently tests only run when manually executing `npm test`, which can lead to untested code being committed or deployed. Need automated safety checks. **Files:** `package.json` (add Husky configuration), `.github/workflows/` (new CI/CD workflow file), potential `.husky/` directory for hooks. **Solution:** Three-tier approach: (1) Pre-commit hook using Husky to run tests before each commit and block if tests fail, (2) CI/CD pipeline (GitHub Actions) to run tests on every push, (3) Pre-deploy check ensuring tests pass before production deployment. Example Husky config provided in discussion.

## Test Pull-to-Refresh Mobile UX - 2025-11-20 20:02

- **Verify PTR improvements on production mobile** - Test pull-to-refresh activation threshold and scrolling behavior on app.myk9q.com after deployment. **Problem:** Pull-to-refresh was interfering with scrolling through long dog lists on mobile home page. Changes deployed (20px activation threshold, increased trigger distance) need real-world mobile testing to confirm they solve the issue. **Files:** `src/components/ui/PullToRefresh.tsx:85-101` (activation threshold logic), `src/pages/Home/Home.tsx:367-372` (PTR configuration). **Solution:** Test on actual mobile device: (1) Verify normal scrolling works smoothly without triggering PTR, (2) Verify intentional pull-down from top triggers refresh after deliberate gesture, (3) If still problematic, consider increasing activation threshold to 30-40px or adding user setting to disable PTR.

## Implement AKC Rules Assistant Feature - 2025-11-20

- **Build AI-powered natural language rule lookup for judges** - Add a slide-out Rules Assistant panel (accessible from hamburger menu) that enables judges and exhibitors to search the AKC Scent Work rulebook using natural language queries like "what is the area size for exterior advanced?". **Features:** AI-powered semantic search when online (via Claude Haiku + Supabase Edge Function), keyword search fallback when offline (IndexedDB), sub-second response times, filter by level/element, rule citations with measurements. **Implementation:** See comprehensive plan in `docs/akc-rules-assistant-implementation-plan.md` for complete architecture, database schema, Edge Function code, frontend components, 7-phase timeline (4 weeks), cost analysis (~$2/year), testing strategy, and deployment checklist. **Cost:** Extremely cost-effective at ~$0.00014 per query using Claude Haiku. **Tech Stack:** Supabase (PostgreSQL + Edge Functions), IndexedDB for offline, React slide-out panel matching Inbox UX pattern.

## Monetization Strategy Research - 2025-11-23 19:30

- **Research exhibitor monetization opportunities** - Brainstorm premium features and services that exhibitors would be willing to pay for to ensure app sustainability and growth. **Problem:** Need to identify viable revenue streams from the exhibitor user segment while maintaining value proposition. Current app is free but needs to explore sustainable monetization models that align with user needs and willingness to pay. **Files:** Consider researching competitive apps, analyzing user feedback in existing features (`src/pages/Home/`, `src/pages/EntryList/`, `src/pages/Settings/`), and documenting findings in new `docs/monetization-strategy.md`. **Solution:** Analyze exhibitor pain points throughout their show workflow, research competitive pricing models in dog show management space, evaluate premium feature opportunities (advanced analytics, training history, performance tracking, premium notifications, ad-free experience, priority support), and assess subscription vs one-time payment models.

## Fix PDF Parser Table Extraction - 2025-11-24 15:37

- **Rewrite PDF parser to extract comparison tables for all levels** - Enhanced table extraction to capture measurements for Novice, Advanced, and Excellent classes in addition to Master. **Problem:** Current parser only extracts the last column of comparison tables (Master level), missing min_hides, max_hides, hides_known, num_containers for other levels. This causes validation test failures (only 28% pass rate) and will provide incorrect information to users. Rules Assistant currently has incomplete/incorrect data for most classes. Required for UKC nosework support and accurate rule information. **Files:** `scripts/parse-akc-rulebook.ts:117-186` (measurement extraction logic), `scripts/fix-master-measurements.ts` (manual fix approach), `tests/rules-validation-tests.json` (test cases), `tests/validation-results.json` (current 72% failure rate). **Solution:** Implement column-aware table parsing that matches level labels (Novice/Advanced/Excellent/Master) with their corresponding measurements in comparison table rows. Extract all columns instead of just the last match. Consider using table structure detection to identify row/column boundaries rather than relying on regex patterns alone.

## Redesign Search/Sort/Filter UI - 2025-11-24 15:41

- **Convert collapsible search/sort controls to slide-out panel** - Replace the current collapsible SearchSortControls component with a slide-out panel similar to Inbox and Rules Assistant. **Problem:** Even when collapsed, the current search/sort UI consumes significant vertical space on mobile devices. Since this is a mobile-first app and search/sort/filter features are not used constantly, vertical real estate is being wasted. The collapsible design is always visible and takes up room that could be used for content. **Files:** `src/components/ui/SearchSortControls.tsx:1-30` (current collapsible component), `src/pages/Home/Home.tsx` (usage in home page), `src/pages/ClassList/ClassFilters.tsx` (usage in class list), `src/components/ui/shared-ui.css` (styling). **Solution:** Create a new slide-out panel component (similar to `src/components/rules/RulesAssistant.tsx` and Inbox panel) that slides in from the right side. Add a button/icon in the header or toolbar to trigger the panel. Move all search, sort, and filter controls into the panel. This frees up vertical space for content while keeping these features easily accessible when needed.
