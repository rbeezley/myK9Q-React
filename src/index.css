/* Import design tokens first - available everywhere */
@import './styles/design-tokens.css';
@import './styles/apple-design-system.css';
@import './styles/shared-components.css';
@import './components/dialogs/shared-dialog.css';
@import './styles/message-banner.css';
@import './styles/page-container.css';
@import './styles/utilities.css';
@import './styles/touch-feedback.css';
@import './styles/touch-targets.css';
@import './styles/one-handed-mode.css';
@import './styles/performance.css';
@import './styles/viewport.css';
@import './styles/high-contrast.css';
@import './styles/reduce-motion.css';

/* Import ALL page CSS upfront to prevent FOUC (Flash of Unstyled Content) */
/* This ensures CSS is loaded synchronously before React renders, eliminating race conditions */
@import './pages/Home/Home.css';
@import './pages/ClassList/ClassList.css';
@import './pages/EntryList/EntryList.css';
@import './pages/Stats/Stats.css';
@import './pages/Settings/Settings.css';
@import './pages/DogDetails/DogDetails.css';
@import './pages/Announcements/Announcements.css';

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body, #root {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
}

/* Root CSS Variables for Settings */
:root {
  /* Font Size Variables (Phase 1B) */
  --font-size-base: var(--token-space-xl);
  --font-size-small: 0.875rem;  /* 14px */
  --font-size-medium: 1rem;      /* var(--token-space-xl) */
  --font-size-large: 1.125rem;   /* 18px */

  /* Scale multipliers for headings based on font size setting */
  --heading-scale: 1;
}

/* Font Size Classes */
html.font-small {
  --font-size-base: 14px;
  --heading-scale: 0.875;
}

html.font-medium {
  --font-size-base: var(--token-space-xl);
  --heading-scale: 1;
}

html.font-large {
  --font-size-base: 18px;
  --heading-scale: 1.125;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", system-ui, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: var(--background, #ffffff);
  color: var(--foreground, #000000);
  font-size: var(--font-size-base);
  overflow-x: hidden; /* Prevent horizontal scrolling */
}

/* Apply font sizes to text elements */
p, span, div, li, td, th {
  font-size: var(--font-size-base);
}

h1 {
  font-size: calc(2rem * var(--heading-scale));
}

h2 {
  font-size: calc(1.5rem * var(--heading-scale));
}

h3 {
  font-size: calc(1.25rem * var(--heading-scale));
}

h4 {
  font-size: calc(1.125rem * var(--heading-scale));
}

h5, h6 {
  font-size: calc(1rem * var(--heading-scale));
}

button, input, select, textarea {
  font-size: var(--font-size-base);
}

/* Custom Scrollbar Styling - Global */
::-webkit-scrollbar {
  width: 8px;  /* Reduced from 12px to minimize layout impact */
  height: 8px;  /* Reduced from 12px to minimize layout impact */
}

/* Light mode (default) - transparent track to avoid gray line */
::-webkit-scrollbar-track {
  background: transparent;
}

/* Dark mode - visible gray track */
.theme-dark ::-webkit-scrollbar-track {
  background: rgba(31, 41, 55, 0.1);
}

::-webkit-scrollbar-thumb {
  background: transparent;  /* Hide scrollbar in light mode */
  border-radius: 4px;
  border: 1px solid transparent;
  background-clip: padding-box;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(99, 102, 241, 0.5);  /* Show on hover */
  background-clip: padding-box;
}

/* Firefox scrollbar - hide in light mode */
* {
  scrollbar-width: thin;
  scrollbar-color: transparent transparent;  /* Hide scrollbar in light mode */
}

/* Firefox dark mode */
.theme-dark * {
  scrollbar-color: rgba(99, 102, 241, 0.4) rgba(31, 41, 55, 0.1);
}

/* Global CSS Rehydration Prevention */
h1, h2, h3, h4, h5, h6 {
  text-transform: none;
  text-align: left;
}

/* Prevent flash of incorrectly styled content during hydration */
.entry-list-container[data-loaded="false"] *,
.class-list-container[data-loaded="false"] *,
.page-container[data-loaded="false"] *,
.app-container[data-loaded="false"] * {
  transition: none;
  animation: none;
}

/* Enable transitions after hydration is complete */
.entry-list-container[data-loaded="true"] *,
.class-list-container[data-loaded="true"] *,
.page-container[data-loaded="true"] *,
.app-container[data-loaded="true"] * {
  transition: inherit;
  animation: inherit;
}