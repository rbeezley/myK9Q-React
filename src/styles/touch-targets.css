/**
 * Touch Target Optimization
 *
 * Ensures all interactive elements meet WCAG 2.1 AA standards:
 * - Minimum 44x44px touch targets
 * - Adequate spacing between targets
 * - Visual feedback on interaction
 * - Thumb-friendly positioning
 *
 * Apple Human Interface Guidelines:
 * - 44x44pt minimum (44px @1x, 88px @2x, 132px @3x)
 * - 8px minimum spacing between targets
 *
 * Android Material Design:
 * - 48x48dp minimum (48px)
 * - 8dp minimum spacing
 *
 * This file uses 44px as the baseline for cross-platform compatibility.
 */

:root {
  /* Touch target sizes */
  --touch-target-min: 44px;
  --touch-target-comfortable: 48px;
  --touch-target-large: 56px;
  --touch-target-xl: 64px;

  /* Spacing for touch targets */
  --touch-spacing-min: 8px;
  --touch-spacing-comfortable: 12px;
  --touch-spacing-generous: 16px;

  /* Hit area expansion (invisible padding) */
  --hit-area-expand: 8px;
}

/* ============================================
   BUTTON TOUCH TARGETS
   ============================================ */

/**
 * Base button class with minimum touch target
 */
.touch-target {
  min-width: var(--touch-target-min);
  min-height: var(--touch-target-min);
  padding: 12px 16px;
  position: relative;
}

.touch-target-comfortable {
  min-width: var(--touch-target-comfortable);
  min-height: var(--touch-target-comfortable);
  padding: 14px 20px;
}

.touch-target-large {
  min-width: var(--touch-target-large);
  min-height: var(--touch-target-large);
  padding: 16px 24px;
}

.touch-target-xl {
  min-width: var(--touch-target-xl);
  min-height: var(--touch-target-xl);
  padding: 18px 28px;
}

/**
 * Expand hit area for small visual elements
 * Example: Icon buttons that look 24px but need 44px hit area
 */
.touch-target-expand::before {
  content: '';
  position: absolute;
  top: calc(var(--hit-area-expand) * -1);
  right: calc(var(--hit-area-expand) * -1);
  bottom: calc(var(--hit-area-expand) * -1);
  left: calc(var(--hit-area-expand) * -1);
  z-index: -1;
}

/**
 * Icon-only buttons
 */
.touch-target-icon {
  min-width: var(--touch-target-min);
  min-height: var(--touch-target-min);
  padding: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
}

.touch-target-icon-comfortable {
  min-width: var(--touch-target-comfortable);
  min-height: var(--touch-target-comfortable);
  padding: 12px;
}

/* ============================================
   SPACING BETWEEN TARGETS
   ============================================ */

/**
 * Minimum spacing between touch targets
 */
.touch-group > * + * {
  margin-top: var(--touch-spacing-min);
}

.touch-group-horizontal > * + * {
  margin-left: var(--touch-spacing-min);
}

.touch-group-comfortable > * + * {
  margin-top: var(--touch-spacing-comfortable);
}

.touch-group-horizontal-comfortable > * + * {
  margin-left: var(--touch-spacing-comfortable);
}

.touch-group-generous > * + * {
  margin-top: var(--touch-spacing-generous);
}

.touch-group-horizontal-generous > * + * {
  margin-left: var(--touch-spacing-generous);
}

/* ============================================
   ONE-HANDED OPERATION ZONES
   ============================================ */

/**
 * Thumb zone (easy to reach with one hand)
 * Bottom 1/3 of screen on mobile
 */
.thumb-zone {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 16px;
  background: white;
  box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
  z-index: 100;
}

/**
 * Safe area insets for notch/home indicator
 * iOS safe areas
 */
.thumb-zone-safe {
  padding-bottom: max(16px, env(safe-area-inset-bottom));
  padding-left: max(16px, env(safe-area-inset-left));
  padding-right: max(16px, env(safe-area-inset-right));
}

/**
 * Stretch zone (harder to reach)
 * Top 1/3 of screen on mobile
 */
.stretch-zone {
  padding-top: 16px;
  padding-bottom: 24px;
}

/* ============================================
   CHECKBOX & RADIO TOUCH TARGETS
   ============================================ */

/**
 * Native checkboxes/radios are too small
 * Wrap in label with expanded hit area
 */
.touch-checkbox,
.touch-radio {
  min-width: var(--touch-target-min);
  min-height: var(--touch-target-min);
  display: inline-flex;
  align-items: center;
  gap: 12px;
  cursor: pointer;
  padding: 12px;
  border-radius: 8px;
  transition: background 0.2s;
}

.touch-checkbox:hover,
.touch-radio:hover {
  background: rgba(0, 0, 0, 0.04);
}

.touch-checkbox input,
.touch-radio input {
  width: 20px;
  height: 20px;
  cursor: pointer;
}

/* ============================================
   LINK TOUCH TARGETS
   ============================================ */

/**
 * Text links need adequate padding
 */
.touch-link {
  padding: 8px 4px;
  min-height: var(--touch-target-min);
  display: inline-flex;
  align-items: center;
}

/* ============================================
   SWIPEABLE ITEMS
   ============================================ */

/**
 * Cards/rows that support swipe gestures
 */
.touch-swipeable {
  min-height: var(--touch-target-large);
  padding: 12px 16px;
  cursor: grab;
  user-select: none;
  touch-action: pan-y; /* Allow vertical scroll, handle horizontal swipe */
}

.touch-swipeable:active {
  cursor: grabbing;
}

/* ============================================
   BOTTOM SHEET TRIGGERS
   ============================================ */

/**
 * Elements that open bottom sheets
 * Should be thumb-friendly
 */
.touch-bottom-sheet-trigger {
  min-height: var(--touch-target-large);
  padding: 14px 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.touch-bottom-sheet-trigger:active {
  transform: scale(0.98);
}

/* ============================================
   ACCESSIBILITY
   ============================================ */

/**
 * Show focus indicators for keyboard navigation
 */
.touch-target:focus-visible,
.touch-link:focus-visible,
.touch-checkbox:focus-visible,
.touch-radio:focus-visible {
  outline: 2px solid var(--primary-color, #007AFF);
  outline-offset: 2px;
}

/**
 * Disabled state
 */
.touch-target:disabled,
.touch-target[aria-disabled="true"] {
  opacity: 0.4;
  cursor: not-allowed;
  pointer-events: none;
}

/* ============================================
   MOBILE-SPECIFIC OPTIMIZATIONS
   ============================================ */

@media (max-width: 768px) {
  /* Larger touch targets on mobile */
  .touch-target-mobile-large {
    min-width: var(--touch-target-large);
    min-height: var(--touch-target-large);
    padding: 16px 24px;
  }

  /* More generous spacing on mobile */
  .touch-group-mobile > * + * {
    margin-top: var(--touch-spacing-comfortable);
  }

  .touch-group-horizontal-mobile > * + * {
    margin-left: var(--touch-spacing-comfortable);
  }

  /* Full-width touch targets on mobile */
  .touch-target-mobile-full {
    width: 100%;
    min-height: var(--touch-target-large);
  }
}

/* ============================================
   ACTIVE/PRESSED STATES
   ============================================ */

/**
 * Visual feedback on touch
 */
.touch-target:active,
.touch-link:active,
.touch-checkbox:active,
.touch-radio:active {
  transform: scale(0.98);
  opacity: 0.8;
}

/**
 * Ripple effect (optional, can use for Material Design feel)
 */
.touch-ripple {
  position: relative;
  overflow: hidden;
}

.touch-ripple::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.1);
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
}

.touch-ripple:active::after {
  width: 200px;
  height: 200px;
}

/* ============================================
   HIGH CONTRAST MODE
   ============================================ */

@media (prefers-contrast: high) {
  .touch-target:focus-visible,
  .touch-link:focus-visible {
    outline-width: 3px;
  }
}

/* ============================================
   REDUCED MOTION
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  .touch-target,
  .touch-link,
  .touch-checkbox,
  .touch-radio,
  .touch-ripple::after {
    transition: none;
  }

  .touch-target:active,
  .touch-link:active,
  .touch-checkbox:active,
  .touch-radio:active {
    transform: none;
  }
}
