/**
 * High Contrast Mode Styles
 *
 * WCAG AAA compliance for users with visual impairments
 * Applied when settings.highContrast is enabled
 */

.high-contrast {
  /* Enhanced color contrast ratios */
  --text-primary: #000000;
  --text-secondary: #1a1a1a;
  --text-inverse: #ffffff;
  --background-primary: #ffffff;
  --background-secondary: #f0f0f0;
  --background-tertiary: #e0e0e0;

  /* High contrast borders */
  --border-color: var(--token-text-primary);
  --border-width: var(--token-space-xs);
  --border-style: solid;

  /* Interactive states */
  --focus-outline: var(--token-space-sm) solid #0066cc;
  --focus-outline-offset: var(--token-space-xs);

  /* Semantic colors with high contrast */
  --color-success: #006400; /* Dark green */
  --color-success-bg: #e6f7e6;
  --color-error: #cc0000; /* Dark red */
  --color-error-bg: #ffe6e6;
  --color-warning: #996600; /* Dark orange */
  --color-warning-bg: #fff3e6;
  --color-info: #004d99; /* Dark blue */
  --color-info-bg: #e6f3ff;

  /* Button colors */
  --button-primary-bg: #0066cc;
  --button-primary-text: #ffffff;
  --button-secondary-bg: #ffffff;
  --button-secondary-text: #000000;
  --button-secondary-border: #000000;

  /* Remove decorative elements */
  --shadow-none: none;
  --border-radius: var(--token-space-xs);
}

/* Dark theme high contrast */
.high-contrast.theme-dark {
  --text-primary: #ffffff;
  --text-secondary: #e6e6e6;
  --text-inverse: #000000;
  --background-primary: #000000;
  --background-secondary: #1a1a1a;
  --background-tertiary: #2d2d2d;
  --border-color: white;

  /* Semantic colors for dark mode */
  --color-success: #00ff00;
  --color-success-bg: #003300;
  --color-error: #ff3333;
  --color-error-bg: #330000;
  --color-warning: #ffcc00;
  --color-warning-bg: #332200;
  --color-info: #3399ff;
  --color-info-bg: #001a33;

  --button-primary-bg: #3399ff;
  --button-primary-text: #000000;
  --button-secondary-bg: #000000;
  --button-secondary-text: #ffffff;
  --button-secondary-border: #ffffff;
}

/* Global high contrast adjustments */
.high-contrast * {
  /* Remove shadows */
  box-shadow: var(--shadow-none) !important;
  text-shadow: none !important;

  /* Simplified borders */
  border-radius: var(--border-radius) !important;
}

/* Text contrast */
.high-contrast {
  color: var(--foreground);
  background-color: var(--background-primary);
}

.high-contrast h1,
.high-contrast h2,
.high-contrast h3,
.high-contrast h4,
.high-contrast h5,
.high-contrast h6 {
  color: var(--foreground);
  font-weight: 700; /* Bolder for better visibility */
}

.high-contrast p,
.high-contrast span,
.high-contrast label {
  color: var(--foreground);
}

.high-contrast .text-secondary,
.high-contrast .setting-hint {
  color: var(--token-text-secondary);
}

/* Links */
.high-contrast a {
  color: var(--button-primary-bg);
  text-decoration: underline;
  font-weight: 600;
}

.high-contrast a:hover {
  text-decoration: underline;
  text-decoration-thickness: var(--token-space-xs);
}

.high-contrast a:visited {
  color: #663399; /* Purple for visited links */
}

/* Buttons */
.high-contrast button,
.high-contrast .button {
  border: var(--border-width) var(--border-style) var(--border-color);
  font-weight: 600;
  min-height: 44px; /* WCAG touch target size */
  padding: var(--token-space-lg) var(--token-space-3xl);
}

.high-contrast button:focus,
.high-contrast .button:focus {
  outline: var(--focus-outline);
  outline-offset: var(--focus-outline-offset);
}

.high-contrast button:hover,
.high-contrast .button:hover {
  border-width: 3px; /* Thicker border on hover */
}

.high-contrast button:active,
.high-contrast .button:active {
  transform: none; /* Remove subtle animations */
}

/* Primary buttons */
.high-contrast .primary-button,
.high-contrast button.primary {
  background-color: var(--button-primary-bg);
  color: var(--button-primary-text);
  border-color: var(--button-primary-bg);
}

/* Secondary buttons */
.high-contrast .secondary-button,
.high-contrast button.secondary {
  background-color: var(--button-secondary-bg);
  color: var(--button-secondary-text);
  border-color: var(--button-secondary-border);
}

/* Danger buttons */
.high-contrast .danger-button {
  background-color: var(--color-error);
  color: var(--text-inverse);
  border-color: var(--color-error);
}

/* Input fields */
.high-contrast input[type="text"],
.high-contrast input[type="email"],
.high-contrast input[type="password"],
.high-contrast input[type="number"],
.high-contrast input[type="tel"],
.high-contrast input[type="url"],
.high-contrast input[type="search"],
.high-contrast textarea,
.high-contrast select {
  border: var(--border-width) var(--border-style) var(--border-color);
  background-color: var(--background-primary);
  color: var(--foreground);
  min-height: 44px;
  font-weight: 500;
}

.high-contrast input:focus,
.high-contrast textarea:focus,
.high-contrast select:focus {
  outline: var(--focus-outline);
  outline-offset: var(--focus-outline-offset);
  border-color: var(--button-primary-bg);
}

/* Checkboxes and radio buttons */
.high-contrast input[type="checkbox"],
.high-contrast input[type="radio"] {
  width: var(--token-space-3xl);
  height: var(--token-space-3xl);
  border: var(--border-width) var(--border-style) var(--border-color);
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  cursor: pointer;
}

.high-contrast input[type="checkbox"]:checked,
.high-contrast input[type="radio"]:checked {
  background-color: var(--button-primary-bg);
  border-color: var(--button-primary-bg);
}

.high-contrast input[type="checkbox"]:checked::after {
  content: "âœ“";
  display: block;
  text-align: center;
  color: var(--text-inverse);
  font-size: 18px;
  font-weight: bold;
  line-height: var(--token-space-2xl);
}

.high-contrast input[type="radio"]:checked::after {
  content: "";
  display: block;
  width: var(--token-space-lg);
  height: var(--token-space-lg);
  margin: var(--token-space-sm);
  background-color: var(--text-inverse);
  border-radius: 50%;
}

.high-contrast input[type="checkbox"]:focus,
.high-contrast input[type="radio"]:focus {
  outline: var(--focus-outline);
  outline-offset: var(--focus-outline-offset);
}

/* Toggle switches */
.high-contrast .toggle-switch {
  border: var(--border-width) var(--border-style) var(--border-color);
}

.high-contrast .toggle-switch input:checked + .toggle-slider {
  background-color: var(--button-primary-bg);
  border: var(--border-width) var(--border-style) var(--border-color);
}

.high-contrast .toggle-slider::before {
  background-color: var(--text-inverse);
  border: var(--border-width) var(--border-style) var(--border-color);
}

/* Cards and containers */
.high-contrast .card,
.high-contrast .settings-section,
.high-contrast .scoresheet-container,
.high-contrast .entry-card {
  border: var(--border-width) var(--border-style) var(--border-color);
  background-color: var(--background-primary);
}

/* Tables */
.high-contrast table {
  border: var(--border-width) var(--border-style) var(--border-color);
  border-collapse: collapse;
}

.high-contrast th,
.high-contrast td {
  border: var(--border-width) var(--border-style) var(--border-color);
  padding: var(--token-space-lg);
}

.high-contrast th {
  background-color: var(--background-tertiary);
  font-weight: 700;
}

.high-contrast tr:nth-child(even) {
  background-color: var(--background-secondary);
}

/* Status badges */
.high-contrast .badge,
.high-contrast .status-badge {
  border: var(--border-width) var(--border-style) var(--border-color);
  font-weight: 600;
  padding: 6px var(--token-space-lg);
}

.high-contrast .badge-success {
  background-color: var(--color-success-bg);
  color: var(--color-success);
  border-color: var(--color-success);
}

.high-contrast .badge-error,
.high-contrast .badge-danger {
  background-color: var(--color-error-bg);
  color: var(--color-error);
  border-color: var(--color-error);
}

.high-contrast .badge-warning {
  background-color: var(--color-warning-bg);
  color: var(--color-warning);
  border-color: var(--color-warning);
}

.high-contrast .badge-info {
  background-color: var(--color-info-bg);
  color: var(--color-info);
  border-color: var(--color-info);
}

/* Modals and overlays */
.high-contrast .modal-overlay {
  background-color: rgba(0, 0, 0, 0.85);
}

.high-contrast .modal-content {
  border: 3px solid var(--border-color);
  background-color: var(--background-primary);
}

/* Navigation */
.high-contrast .nav-link,
.high-contrast .menu-item {
  border: var(--border-width) var(--border-style) transparent;
}

.high-contrast .nav-link:hover,
.high-contrast .menu-item:hover {
  border-color: var(--border-color);
  background-color: var(--background-secondary);
}

.high-contrast .nav-link:focus,
.high-contrast .menu-item:focus {
  outline: var(--focus-outline);
  outline-offset: var(--focus-outline-offset);
}

.high-contrast .nav-link.active,
.high-contrast .menu-item.active {
  border-color: var(--button-primary-bg);
  background-color: var(--background-tertiary);
  font-weight: 700;
}

/* Focus indicators - enhanced for all interactive elements */
.high-contrast *:focus {
  outline: var(--focus-outline);
  outline-offset: var(--focus-outline-offset);
}

.high-contrast *:focus:not(:focus-visible) {
  outline: none;
}

.high-contrast *:focus-visible {
  outline: var(--focus-outline);
  outline-offset: var(--focus-outline-offset);
}

/* Remove transparent backgrounds */
.high-contrast .transparent-bg,
.high-contrast [style*="opacity"] {
  opacity: 1 !important;
}

/* Ensure sufficient contrast for disabled elements */
.high-contrast button:disabled,
.high-contrast input:disabled,
.high-contrast select:disabled,
.high-contrast textarea:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  border-style: dashed;
}

/* Tooltips */
.high-contrast [title]::after,
.high-contrast .tooltip {
  border: var(--border-width) var(--border-style) var(--border-color);
  background-color: var(--background-tertiary);
  color: var(--foreground);
  font-weight: 600;
}

/* Loading states */
.high-contrast .loading,
.high-contrast .skeleton {
  background-color: var(--background-tertiary);
  border: var(--border-width) var(--border-style) var(--border-color);
}

/* Scrollbars */
.high-contrast ::-webkit-scrollbar {
  width: var(--token-space-xl);
  height: var(--token-space-xl);
}

.high-contrast ::-webkit-scrollbar-track {
  background-color: var(--background-secondary);
  border: var(--border-width) var(--border-style) var(--border-color);
}

.high-contrast ::-webkit-scrollbar-thumb {
  background-color: var(--border-color);
  border: var(--token-space-xs) solid var(--background-primary);
}

.high-contrast ::-webkit-scrollbar-thumb:hover {
  background-color: var(--button-primary-bg);
}

/* Selection highlight */
.high-contrast ::selection {
  background-color: var(--button-primary-bg);
  color: var(--button-primary-text);
}

/* Remove gradients */
.high-contrast [style*="gradient"] {
  background-image: none !important;
  background-color: var(--background-primary) !important;
}

/* Error states */
.high-contrast .error,
.high-contrast .invalid,
.high-contrast [aria-invalid="true"] {
  border-color: var(--color-error);
  border-width: 3px;
}

.high-contrast .error-message {
  color: var(--color-error);
  font-weight: 600;
}

/* Success states */
.high-contrast .success,
.high-contrast .valid {
  border-color: var(--color-success);
  border-width: 3px;
}

/* Icons - ensure visibility */
.high-contrast svg,
.high-contrast img {
  filter: contrast(1.2);
}

.high-contrast .icon {
  stroke-width: 2.5px; /* Thicker icon strokes */
}

/* Animations - simplified */
.high-contrast * {
  transition-duration: 0.15s !important;
  animation-duration: 0.15s !important;
}

/* Print styles */
@media print {
  .high-contrast {
    --text-primary: #000000;
    --background-primary: #ffffff;
    --border-color: var(--token-text-primary);
  }

  .high-contrast * {
    background-color: white !important;
    color: black !important;
    border-color: black !important;
  }
}

/* Screen reader enhancements */
.high-contrast .sr-only:not(:focus):not(:active) {
  clip: rect(0, 0, 0, 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

/* Ensure images have borders for context */
.high-contrast img:not([alt=""]) {
  border: var(--border-width) var(--border-style) var(--border-color);
}

/* List items */
.high-contrast li {
  margin-bottom: var(--token-space-md);
}

.high-contrast ul,
.high-contrast ol {
  padding-left: var(--token-space-3xl);
}

/* Code blocks */
.high-contrast pre,
.high-contrast code {
  background-color: var(--background-tertiary);
  border: var(--border-width) var(--border-style) var(--border-color);
  padding: var(--token-space-sm) var(--token-space-md);
  font-weight: 600;
}

/* Emphasis */
.high-contrast strong,
.high-contrast b {
  font-weight: 900;
}

.high-contrast em,
.high-contrast i {
  font-style: italic;
  font-weight: 600;
}

/* High contrast specific utilities */
.high-contrast-border {
  border: var(--border-width) var(--border-style) var(--border-color) !important;
}

.high-contrast-focus {
  outline: var(--focus-outline) !important;
  outline-offset: var(--focus-outline-offset) !important;
}

.high-contrast-text {
  color: var(--text-primary) !important;
}

.high-contrast-bg {
  background-color: var(--background-primary) !important;
}
