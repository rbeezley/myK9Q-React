# Legacy Database Schema Documentation

This document describes the table structure of the legacy (Flutter) database that we're migrating from.

## Important Tables

### tbl_show_queue
The main shows table in the legacy database.

**Table Name**: `tbl_show_queue`
**Key Field**: `mobile_app_lic_key` (contains the license key we use for authentication)

```sql
create table public.tbl_show_queue (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  mobile_app_lic_key character varying null,  -- This is the license key field!
  app_version character varying null,
  org text null,
  clubname text null,
  showid integer null,
  showname text null,
  startdate date null,
  enddate date null,
  eventurl text null,
  website text null,
  secretary text null,
  chairman text null,
  note text null,
  siteaddress text null,
  sitecity text null,
  sitestate text null,
  sitezip text null,
  logo text null,
  chairmanemail text null,
  chairmanphone text null,
  secretaryemail text null,
  secretaryphone text null,
  showtype text null default 'Regular'::text,
  sitename text null,
  constraint tbl_show_queue_pkey primary key (id),
  constraint mobileapplic_showid unique (mobile_app_lic_key, showid)
) TABLESPACE pg_default;
```

## Key Differences from V3 Database

| V3 Database | Legacy Database | Notes |
|-------------|----------------|-------|
| `shows` | `tbl_show_queue` | Main shows table |
| `license_key` | `mobile_app_lic_key` | Field name for license key |
| Normalized naming | tbl_ prefix | Legacy uses tbl_ prefix convention |

## Important for Migration

When checking for passcodes in the legacy database during Phase 3:
1. Query the `tbl_show_queue` table
2. Use the `mobile_app_lic_key` field to match license keys
3. The passcode validation logic remains the same

## Other Potential Tables (to be confirmed)
- `tbl_trial_queue` - Likely contains trial data
- `tbl_class_queue` - Likely contains class data
- `tbl_entry_queue` - Likely contains entry data
- `tbl_result_queue` - Likely contains result data

All legacy tables likely follow the `tbl_*_queue` naming convention.